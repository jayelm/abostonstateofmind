<!DOCTYPE html>
<head>
  <title>A Boston State of Mind</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" href="css/style.css">
  <link href='http://fonts.googleapis.com/css?family=Raleway:500' rel='stylesheet' type='text/css'>
  <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-48040500-3', 'auto');
    ga('send', 'pageview');
  </script>
  <script>
    function display() {
      setTimeout(function() {
        document.getElementById('content').classList.add('visible');
      }, 500);

      window.addEventListener('keydown', function(e) {
        switch (e.keyCode) {
          case 27: // escape
            if (teaserShowing) {
              toggleTeaser();
            }
            break;

          // Anything else?

          default: return;
        }
      });

      // Set variables used later
      window.hero = document.getElementById('hero');
      window.about = document.getElementById('about');
      window.play = document.getElementById('play');
      window.description = document.getElementById('description');
      window.teaser = document.getElementById('video-container');
      description.style.display = 'none';
      teaser.style.display = 'none';
    }

    var mainDisplay = true;
    var teaserShowing = false;
    var TRANSITION_TIME = 1000;

    // TODO: HTML5 pushState + graceful degrade to hash for SEO
    /*
    if (typeof(window.history.pushState) == 'function') {
        window.history.pushState({id: 'teaser', '', 'about');
    } else {
          window.location.hash = '#!' + path;
    }
    */

    function toggleAbout() {
      if (mainDisplay) {
        ga('send', 'event', 'button', 'click', 'about');
        hero.classList.toggle('hidden');
        setTimeout(function() {
          hero.style.display = 'none';
        }, TRANSITION_TIME);
        setTimeout(function() {
          description.style.display = 'table-cell';
          setTimeout(function() {
            description.classList.toggle('visible');
          }, 50);
        }, TRANSITION_TIME);
        mainDisplay = false;
      } else {
        description.classList.toggle('visible');
        setTimeout(function() {
          description.style.display = 'none';
        }, TRANSITION_TIME);
        setTimeout(function() {
          hero.style.display = 'table-cell';
          setTimeout(function() { // Mild delay preserves transition
            hero.classList.toggle('hidden');
          }, 50);
        }, TRANSITION_TIME);
        mainDisplay = true;
      }
    }

    function toggleTeaser() {
      if (!teaserShowing) {
        ga('send', 'event', 'button', 'click', 'teaser');
        hero.classList.toggle('hidden');
        setTimeout(function() {
          hero.style.display = 'none';
        }, TRANSITION_TIME);
        setTimeout(function() {
          teaser.style.display = 'block';
          setTimeout(function() {
            teaser.classList.toggle('visible');
          }, 50);
        }, TRANSITION_TIME);
        teaserShowing = true;
      } else {
        teaser.classList.toggle('visible');
        setTimeout(function() {
          teaser.style.display = 'none';
        }, TRANSITION_TIME);
        setTimeout(function() {
          hero.style.display = 'table-cell';
          setTimeout(function() { // Mild delay preserves transition
            hero.classList.toggle('hidden');
          }, 50);
        }, TRANSITION_TIME);
        teaserShowing = false;
      }
    }

  </script>
</head>

<body onload="display()">
  <div class="wrap" id="overlay"></div>
  <div class="wrap hidden" id="content">
    <div class="initial-visible" id="hero">
      <img id="logo" src="img/logo.png">
      <div class="action_nav">
        <div class="button noselect" id="about" onclick="toggleAbout()">ABOUT</div>
        <div class="button noselect" id="play" onclick="toggleTeaser()">TEASER</div>
      </div>
      <div class="lower">
        <p>APRIL 7, 2015 - 7:00 PM</p>
        <p>YAWKEY CENTER<br> BOSTON COLLEGE</p>
      </div>
    </div>
    <div class="initial-hidden" id="description">
      <div id="inner-wrapper">

      <i class="fa fa-arrow-left fa-lg" onclick="toggleAbout()"></i>
      <h2 id="about-header">ABOUT</h2>
      <p>
        In an original documentary to be premiered on April 7th, 2015, the
        Boston College Gabelli Presidential Scholars Program Class of 2017 aims
        to explore the issue of <strong>mental health</strong> in the greater
        Boston area, focusing especially on <strong>societal
        injustices</strong> related to treatment, stigma, and care.
     </p>
      <div id="bottom">
        <a href="https://www.facebook.com/events/1560005144233955/"><i class="fa fa-facebook"></i></a>
        |
        <a href="https://twitter.com/UnmaskingBoston"><i class="fa fa-twitter"></i></a>
        |
        <div class="small">Background picture by <a id="cred" href="https://www.flickr.com/photos/rjshade/10163674693/">Robbie Shade</a></div>
      </div>
      </div>
    </div>
  </div>
  <div class="initial-hidden" id="video-container">
    <!-- May need allowfullscreen -->
    <i id="video-back" class="fa fa-arrow-left fa-2x" onclick="toggleTeaser()"></i>
    <iframe type="content" src="http://www.youtube.com/embed/SZyIdoH7hGw" frameborder="0" allowfullscreen></iframe>
  </div>
</body>
